## PRÀCTICA 3 - CRUD + CONSULTES + MONGODB

<p>1. **Crear un entorn amb FastAPI**</p><p>&emsp;Utilitzar el framework fastapi per crear una api rest</p><p>&emsp;<https://fastapi.tiangolo.com/></p><p>&emsp;</p><p>2. **Crear una bases de dades amb MongoDB i tingui una colecció que es digui *films*. Aquesta tindrà la següent estructura**</p><p>&emsp;{</p><p>&emsp;`	`"title": “str”,</p><p>&emsp;`	`"director": “str”,</p><p>&emsp;`	`"year": int,</p><p>&emsp;`	`"genre": “str”,</p><p>&emsp;`	`"rating":number ,</p><p>&emsp;`	`"country": “str”,</p><p>"created\_at": “date”,</p><p>"update\_at": “date”,</p><p>`  `}</p><p></p><p>3. Les funcionalitats que ens demanen el client:</p><p>&emsp;a. **CRUD Films:  (7 punts)**</p><p>&emsp;&emsp;</p><p>- Ruta:  **/films/**</p><p>&emsp;Tipus de petició: Get</p><p>&emsp;Funcionament: Retorna **un objecte json que contindrà “**status”:1 i “data”: una llista d’objectes json amb tota la informació dels films.</p><p>&emsp;En cas d’error **retornarà un objecte** **json** que contindrà “status” : -1 i “messatge”: missatge amb l’error que s’ha produït.</p><p></p><p>- Ruta:  **/film/{id}**</p><p>&emsp;Tipus de petició: Get</p><p>&emsp;Funcionament: Retorna **un objecte json que contindrà “**status”:1 i “data”: un objecte json amb la informació del film que la id de la bases de dades coincideix amb la id que ens arribar per paràmetre.</p><p>&emsp;En cas d’error **retornarà un objecte** **json** que contindrà “status” : -1 i “message”: missatge amb l’error que s’ha produït.</p><p></p><p>- Ruta:  **/film/**</p><p>&emsp;Tipus de petició: Post</p><p>&emsp;Funcionament: Permet afegir un nou film a la BBDD</p><p>&emsp;Retorna **un objecte json que contindrà “**status”:1 i “data”: un objecte json** amb la informació del nou film que s’ha afegit amb la id.</p><p>&emsp;En cas d’error **retornarà un objecte** que contindrà “status” : -1 i “message”: missatge amb l’error que s’ha produït.</p><p></p><p>- Ruta:  **/film/{id}**</p><p>&emsp;Tipus de petició: Put</p><p>&emsp;Funcionament: Permet modificar qualsevol informació d’un film concret a la BBDD definit per la id que arriba per paràmetre.</p><p>&emsp;Retorna **un objecte json que contindrà “**status”:1 i “message”: “El film s’ha actualitzat correctament”.</p><p>&emsp;En cas d’error **retornarà un objecte** que contindrà status : -1 i “message”: missatge amb l’error que s’ha produït.</p><p></p><p>- Ruta:  **/film/{id}**</p><p>&emsp;Tipus de petició: Delete</p><p>&emsp;Funcionament: Permet eliminar un producte de la BBDD</p><p>&emsp;Retorna **un objecte json que contindrà “**status”:1 i “messatge”: “El film s’ha eliminat correctament”.</p><p>&emsp;En cas d’error **retornarà un objecte** que contindrà status : -1 i “message”: missatge amb l’error que s’ha produït.</p><p></p><p>b. **Consultes avançades (3 punt)**</p><p>&emsp;&emsp;Fer servir ***query parameters*** per fer les següents consultes:</p><p>&emsp;&emsp;Us podeu ajudar de la documentació: <https://fastapi.tiangolo.com/tutorial/query-params/></p><p>- **?genre= (str)** </p><p>&emsp;- valor genre=”*Action” | ”Drama” | ”Romance” | ”Thriller” | ”Comedy” | ”Horror” | ”Documentary” | ”Animation”*</p><p>&emsp;- Retorna **una llista d’objectes json** dels films segons el genre.</p><p>&emsp;- ` `Exemple ruta amb query parameters: *?genre=Comedy*</p><p>- **?field=(str)&order=(str)**</p><p>&emsp;- valor field= “title” | “director” | “year”</p><p>&emsp;- valor order: “asc” | “desc”</p><p>&emsp;- Retorna **una llista json** ordenada ascendent o descendent segons el camp de field.</p><p>&emsp;- ` `Exemple ruta amb query parameters: *?field=title&orderby=asc*</p><p>- **?limit=(int)**</p><p>&emsp;- Valor: 1 - 100</p><p>&emsp;- Retorna **una objecte json** amb: </p><p>&emsp;&emsp;- “row\_count”: número total de registres </p><p>&emsp;&emsp;- “data”: una llista d’objectes json segons el límit definit en el query parameter.</p><p>&emsp;- Exemple ruta amb query parameters: ?limit=10</p>||
